jQuery(document).ready(function(a){sce=a.simplecommentediting=a.fn.simplecommentediting=function(){return this.each(function(){function e(d,c){a(d).siblings(".sce-textarea").off();a(d).off();a(d).parent().remove();a.post(b,{action:"sce_delete_comment",comment_id:c.cid,post_id:c.pid,nonce:c._wpnonce},function(b){b.errors?(alert(simple_comment_editing.comment_deleted_error),a(d).siblings(".sce-textarea").on(),a(d).on()):(a("#sce-edit-comment-status"+c.cid).removeClass().addClass("sce-status updated").html(simple_comment_editing.comment_deleted).show(),
setTimeout(function(){a("#comment-"+c.cid).slideUp()},3E3))},"json")}var b=a(this).find("a:first").attr("href"),c=wpAjax.unserialize(b),d=this;a(d).on("click","a",function(b){b.preventDefault();a("#sce-edit-comment-status"+c.cid).removeClass().addClass("sce-status").css("display","none");a(d).fadeOut("fast",function(){a(d).siblings(".sce-textarea").find("button").prop("disabled",!1);a(d).siblings(".sce-textarea").fadeIn("fast",function(){a(d).siblings(".sce-textarea").find("textarea:first").focus()})})});
a(d).siblings(".sce-textarea").on("click",".sce-comment-cancel",function(b){b.preventDefault();a(d).siblings(".sce-textarea").fadeOut("fast",function(){a(d).fadeIn("fast");a("#sce-edit-comment"+c.cid+" textarea").val(sce.textareas[c.cid])})});a(d).siblings(".sce-textarea").on("click",".sce-comment-delete",function(a){a.preventDefault();simple_comment_editing.allow_delete_confirmation?confirm(simple_comment_editing.confirm_delete)&&e(d,c):e(d,c)});a(d).siblings(".sce-textarea").on("click",".sce-comment-save",
function(f){f.preventDefault();a(d).siblings(".sce-textarea").find("button").prop("disabled",!0);a(d).siblings(".sce-textarea").fadeOut("fast",function(){a(d).siblings(".sce-loading").fadeIn("fast");var f=a(d).siblings(".sce-textarea").find("textarea").val(),g=a.trim(f);"I am God"==f&&"object"==typeof console&&console.log("Isn't God perfect?  Why the need to edit?");""==g&&1==simple_comment_editing.allow_delete?confirm(simple_comment_editing.confirm_delete)?e(d,c):(a("#sce-edit-comment"+c.cid+" textarea").val(sce.textareas[c.cid]),
a(d).siblings(".sce-loading").fadeOut("fast",function(){a(d).fadeIn("fast")})):(jQuery("body").triggerHandler("sce.comment.save.pre",[c.cid,c.pid]),f={action:"sce_save_comment",comment_content:g,comment_id:c.cid,post_id:c.pid,nonce:c._wpnonce},f=wp.hooks.applyFilters("sce.comment.save.data",f),a.post(b,f,function(b){a(d).siblings(".sce-loading").fadeOut("fast",function(){a(d).fadeIn("fast",function(){b.errors?(1==b.remove&&(a(d).siblings(".sce-textarea").off(),a(d).off(),a(d).parent().remove()),a("#sce-edit-comment-status"+
c.cid).removeClass().addClass("sce-status error").html(b.error).show()):(a("#sce-comment"+c.cid).html(b.comment_text),sce.textareas[c.cid]=a("#sce-edit-comment"+c.cid+" textarea").val(),jQuery("body").triggerHandler("sce.comment.save",[c.cid,c.pid]))})})},"json"))})});a.post(b,{action:"sce_get_time_left",comment_id:c.cid,post_id:c.pid,_ajax_nonce:simple_comment_editing.nonce},function(b){var c=parseInt(b.minutes),e=parseInt(b.seconds),f=sce.get_timer_text(c,e);b.can_edit?(a(d).find(".sce-timer").html(f),
a(d).siblings(".sce-textarea").find(".sce-timer").html(f),a(d).show(400,function(){a(d).trigger("sce.timer.loaded",d)}),sce.textareas[b.comment_id]=a("#sce-edit-comment"+b.comment_id+" textarea").val(),sce.timers[b.comment_id]={minutes:c,seconds:e,start:(new Date).getTime(),time:0,timer:function(){timer_seconds=sce.timers[b.comment_id].seconds-1;timer_minutes=sce.timers[b.comment_id].minutes;if(0>=timer_minutes&&0>=timer_seconds)a(d).siblings(".sce-textarea").off(),a(d).off(),a(d).parent().remove();
else{0>timer_seconds&&(--timer_minutes,timer_seconds=59);var c=sce.get_timer_text(timer_minutes,timer_seconds);a(d).find(".sce-timer").html(c);a(d).siblings(".sce-textarea").find(".sce-timer").html(c);sce.timers[b.comment_id].seconds=timer_seconds;sce.timers[b.comment_id].minutes=timer_minutes;c=sce.timers[b.comment_id];c.time+=1E3;var e=(new Date).getTime()-c.start-c.time;window.setTimeout(c.timer,1E3-e)}}},window.setTimeout(sce.timers[b.comment_id].timer,1E3)):(a(d).siblings(".sce-textarea").off(),
a(d).off(),a(d).parent().remove())},"json")})};sce.get_timer_text=function(a,b){0>b&&(--a,b=59);var c="";1<=a&&(c+=a+" "+simple_comment_editing.timer.minutes[a],0<b&&(c+=" "+simple_comment_editing.and+" "));0<b&&(c+=b+" "+simple_comment_editing.timer.seconds[b]);return c=wp.hooks.applyFilters("sce.comment.timer.text",c,simple_comment_editing.timer.minutes[a],simple_comment_editing.timer.seconds[b],a,b)};sce.set_comment_cookie=function(e,b,c){a.post(simple_comment_editing.ajax_url,{action:"sce_get_cookie_var",
post_id:e,comment_id:b,_ajax_nonce:simple_comment_editing.nonce},function(a){var d=new Date(a.expires);d=d.toGMTString();document.cookie=a.name+"="+a.value+"; expires="+d+"; path="+a.path;"function"==typeof c&&c(b)},"json")};sce.timers=[];sce.textareas=[];a(".sce-edit-button").simplecommentediting();a(".sce-edit-button").on("sce.timer.loaded",SCE_comment_scroll);a("body").on("comment.posted",function(e,b,c){sce.set_comment_cookie(b,c,function(b){a.post(simple_comment_editing.ajax_url,{action:"sce_get_comment",
comment_id:b,_ajax_nonce:simple_comment_editing.nonce},function(b){a("body").trigger("sce.comment.loaded",[b])},"json")})});a("body").on("epoch.comment.posted",function(e,b,c){"undefined"!=typeof b&&sce.set_comment_cookie(b,c,function(b){a.post(simple_comment_editing.ajax_url,{action:"sce_epoch_get_comment",comment_id:b,_ajax_nonce:simple_comment_editing.nonce},function(c){comment=Epoch.parse_comment(c);a("#comment-"+b).replaceWith(comment);a("#comment-"+b).find(".sce-edit-button").simplecommentediting()},
"json")})});a("body").on("epoch.comments.loaded, epoch.two.comments.loaded",function(e){setTimeout(function(){a(".sce-edit-button").simplecommentediting()},1E3)});a("body").on("epoch.two.comment.posted",function(e){comment_id=e.comment_id;sce.set_comment_cookie(e.post,comment_id,function(b){a.post(simple_comment_editing.ajax_url,{action:"sce_epoch2_get_comment",comment_id:b,_ajax_nonce:simple_comment_editing.nonce},function(c){a("#comment-"+b).find("p").parent().html(c);a("#comment-"+b).find(".sce-edit-button").simplecommentediting()})})})});
function SCE_comment_scroll(a,e){var b=""+window.location;/(#[^-]*\-[^&]*)/.test(b)&&(b=jQuery(""+window.location.hash),0<b.length&&(b=b.offset().top,jQuery("html,body").animate({scrollTop:b},1)))}function SCE_comments_updated(a){if(a=a.match(/#comment-(\d+)/))comment_id=a[1],jQuery("#comment-"+comment_id).find(".sce-edit-button").simplecommentediting()};