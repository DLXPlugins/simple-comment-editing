"use strict";var _iterator=require("babel-runtime/core-js/symbol/iterator"),_iterator2=_interopRequireDefault(_iterator),_symbol=require("babel-runtime/core-js/symbol"),_symbol2=_interopRequireDefault(_symbol),_typeof="function"==typeof _symbol2.default&&"symbol"==typeof _iterator2.default?function(a){return typeof a}:function(a){return a&&"function"==typeof _symbol2.default&&a.constructor===_symbol2.default&&a!==_symbol2.default.prototype?"symbol":typeof a};function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}var __=wp.i8nn.__,_n=wp.i18n._n;jQuery(document).ready(function(a){sce=a.simplecommentediting=a.fn.simplecommentediting=function(){this;return this.each(function(){function b(b,d){a(b).siblings(".sce-textarea").off(),a(b).off(),a(b).parent().remove(),a.post(c,{action:"sce_delete_comment",comment_id:d.cid,post_id:d.pid,nonce:d._wpnonce},function(c){c.errors?(alert(__("Your comment could not be deleted","simple-comment-editing")),a(b).siblings(".sce-textarea").on(),a(b).on()):(a("#sce-edit-comment-status"+d.cid).removeClass().addClass("sce-status updated").html(__("Your comment has been removed.","simple-comment-editing")).show(),setTimeout(function(){a("#comment-"+d.cid).slideUp()},3e3))},"json")}var c=a(this).find("a:first").attr("href"),d=wpAjax.unserialize(c),f=this;a(f).on("click","a",function(b){b.preventDefault(),a("#sce-edit-comment-status"+d.cid).removeClass().addClass("sce-status").css("display","none"),a(f).fadeOut("fast",function(){a(f).siblings(".sce-textarea").find("button").prop("disabled",!1),a(f).siblings(".sce-textarea").fadeIn("fast",function(){a(f).siblings(".sce-textarea").find("textarea:first").focus()})})}),a(f).siblings(".sce-textarea").on("click",".sce-comment-cancel",function(b){b.preventDefault(),a(f).siblings(".sce-textarea").fadeOut("fast",function(){a(f).fadeIn("fast"),a("#sce-edit-comment"+d.cid+" textarea").val(sce.textareas[d.cid])})});a(f).siblings(".sce-textarea").on("click",".sce-comment-delete",function(a){a.preventDefault(),simple_comment_editing.allow_delete_confirmation?confirm(__("Do you want to delete this comment?","simple-comment-editing"))&&b(f,d):b(f,d)}),a(f).siblings(".sce-textarea").on("click",".sce-comment-save",function(g){g.preventDefault(),a(f).siblings(".sce-textarea").find("button").prop("disabled",!0),a(f).siblings(".sce-textarea").fadeOut("fast",function(){a(f).siblings(".sce-loading").fadeIn("fast");var e=a(f).siblings(".sce-textarea").find("textarea").val(),g=a.trim(e);if("I am God"==e&&"object"==("undefined"==typeof console?"undefined":_typeof(console))&&console.log("Isn't God perfect?  Why the need to edit?"),""==g&&!0==simple_comment_editing.allow_delete)return confirm(__("Do you want to delete this comment?","simple-comment-editing"))?void b(f,d):(a("#sce-edit-comment"+d.cid+" textarea").val(sce.textareas[d.cid]),void a(f).siblings(".sce-loading").fadeOut("fast",function(){a(f).fadeIn("fast")}));jQuery("body").triggerHandler("sce.comment.save.pre",[d.cid,d.pid]);var h={action:"sce_save_comment",comment_content:g,comment_id:d.cid,post_id:d.pid,nonce:d._wpnonce};h=wp.hooks.applyFilters("sce.comment.save.data",h),a.post(c,h,function(b){a(f).siblings(".sce-loading").fadeOut("fast",function(){a(f).fadeIn("fast",function(){b.errors?(!0==b.remove&&(a(f).siblings(".sce-textarea").off(),a(f).off(),a(f).parent().remove()),a("#sce-edit-comment-status"+d.cid).removeClass().addClass("sce-status error").html(b.error).show()):(a("#sce-comment"+d.cid).html(b.comment_text),sce.textareas[d.cid]=a("#sce-edit-comment"+d.cid+" textarea").val(),jQuery("body").triggerHandler("sce.comment.save",[d.cid,d.pid]))})})},"json")})}),a.post(c,{action:"sce_get_time_left",comment_id:d.cid,post_id:d.pid,_ajax_nonce:simple_comment_editing.nonce},function(b){var c=parseInt(b.minutes),d=parseInt(b.seconds),e=sce.get_timer_text(c,d),g=b.can_edit;return g?void(a(f).find(".sce-timer").html(e),a(f).siblings(".sce-textarea").find(".sce-timer").html(e),a(f).show(400,function(){a(f).trigger("sce.timer.loaded",f)}),sce.textareas[b.comment_id]=a("#sce-edit-comment"+b.comment_id+" textarea").val(),sce.timers[b.comment_id]={minutes:c,seconds:d,start:new Date().getTime(),time:0,timer:function(){if(timer_seconds=sce.timers[b.comment_id].seconds-1,timer_minutes=sce.timers[b.comment_id].minutes,0>=timer_minutes&&0>=timer_seconds)return a(f).siblings(".sce-textarea").off(),a(f).off(),void a(f).parent().remove();0>timer_seconds&&(timer_minutes-=1,timer_seconds=59);var c=sce.get_timer_text(timer_minutes,timer_seconds);a(f).find(".sce-timer").html(c),a(f).siblings(".sce-textarea").find(".sce-timer").html(c),sce.timers[b.comment_id].seconds=timer_seconds,sce.timers[b.comment_id].minutes=timer_minutes;var d=sce.timers[b.comment_id];d.time+=1e3;var e=new Date().getTime()-d.start-d.time;window.setTimeout(d.timer,1e3-e)}},window.setTimeout(sce.timers[b.comment_id].timer,1e3)):(a(f).siblings(".sce-textarea").off(),a(f).off(),void a(f).parent().remove())},"json")})},sce.get_timer_text=function(a,b){0>b&&(a-=1,b=59);var c="";return 1<=a&&(c+=a+" "+_n("Minute","Minutes",a,"simple-comment-editing"),0<b&&(c+=" "+__("and","simple-comment-editing")+" ")),0<b&&(c+=b+" "+_n("Second","Seconds",b,"simple-comment-editing")),c=wp.hooks.applyFilters("sce.comment.timer.text",c,_n("Minute","Minutes",a,"simple-comment-editing"),_n("Second","Seconds",b,"simple-comment-editing")),c},sce.set_comment_cookie=function(b,c,d){a.post(simple_comment_editing.ajax_url,{action:"sce_get_cookie_var",post_id:b,comment_id:c,_ajax_nonce:simple_comment_editing.nonce},function(a){var b=new Date(a.expires);b=b.toGMTString(),document.cookie=a.name+"="+a.value+"; expires="+b+"; path="+a.path,"function"==typeof d&&d(c)},"json")},sce.timers=[],sce.textareas=[],a(".sce-edit-button").simplecommentediting(),a(".sce-edit-button").on("sce.timer.loaded",SCE_comment_scroll),a("body").on("comment.posted",function(b,c,d){sce.set_comment_cookie(c,d,function(b){a.post(simple_comment_editing.ajax_url,{action:"sce_get_comment",comment_id:b,_ajax_nonce:simple_comment_editing.nonce},function(b){a("body").trigger("sce.comment.loaded",[b])},"json")})}),a("body").on("epoch.comment.posted",function(b,c,d){"undefined"==typeof c||sce.set_comment_cookie(c,d,function(b){a.post(simple_comment_editing.ajax_url,{action:"sce_epoch_get_comment",comment_id:b,_ajax_nonce:simple_comment_editing.nonce},function(c){comment=Epoch.parse_comment(c),a("#comment-"+b).replaceWith(comment),a("#comment-"+b).find(".sce-edit-button").simplecommentediting()},"json")})}),a("body").on("epoch.comments.loaded, epoch.two.comments.loaded",function(){setTimeout(function(){a(".sce-edit-button").simplecommentediting()},1e3)}),a("body").on("epoch.two.comment.posted",function(b){comment_id=b.comment_id,sce.set_comment_cookie(b.post,comment_id,function(b){a.post(simple_comment_editing.ajax_url,{action:"sce_epoch2_get_comment",comment_id:b,_ajax_nonce:simple_comment_editing.nonce},function(c){a("#comment-"+b).find("p").parent().html(c),a("#comment-"+b).find(".sce-edit-button").simplecommentediting()})})})});function SCE_comment_scroll(){var a=""+window.location,b=/(#[^-]*\-[^&]*)/;if(b.test(a)&&(a=jQuery(""+window.location.hash),0<a.length)){var c=a.offset().top;jQuery("html,body").animate({scrollTop:c},1)}}function SCE_comments_updated(a){var b=a.match(/#comment-(\d+)/);b&&(comment_id=b[1],jQuery("#comment-"+comment_id).find(".sce-edit-button").simplecommentediting())}
//# sourceMappingURL=simple-comment-editing.min.js.map
